<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>N'dex - ÿ®ÿ∑ÿßŸÇÿ™ŸÉ ÿßŸÑÿ±ŸÇŸÖŸäÿ©</title>
    <meta name="description" content="ŸÖŸÜÿµÿ© N'dex ŸÑÿ•ŸÜÿ¥ÿßÿ° ÿ®ÿ∑ÿßŸÇÿßÿ™ ÿ™ÿπÿ±ŸäŸÅ ÿ±ŸÇŸÖŸäÿ© ÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿ© ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ÿ®ÿÆÿ∑Ÿàÿßÿ™ ÿ≥ŸáŸÑÿ© Ÿàÿ≥ÿ±Ÿäÿπÿ©.">
    <meta name="keywords" content="ÿ®ÿ∑ÿßŸÇÿ© ÿ™ÿπÿ±ŸäŸÅ ÿ±ŸÇŸÖŸäÿ©, CV, ÿ≥Ÿäÿ±ÿ© ÿ∞ÿßÿ™Ÿäÿ©, AI, ÿ™ÿµŸÖŸäŸÖ ŸÉÿ±ÿ™ ÿ¥ÿÆÿµŸä">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4947844049239094" crossorigin="anonymous"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@500;700&display=swap" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
    
    <link rel="icon" type="image/png" sizes="32x32" href="https://i.ibb.co/nqFMRwmL/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="64x64" href="https://i.ibb.co/hRbm5vd/favicon-64x64.png">
    <link rel="icon" type="image/png" sizes="96x96" href="https://i.ibb.co/WWzMrBs/favicon-96x96.png">
    
    <style>
        :root {
            --primary: #3498db;
            --secondary: #2980b9;
            --bg-light: #f0f4f7;
            --bg-dark: #1c2b36;
            --text-light: #f5f5f5;
            --text-dark: #333;
            --card-bg-light: #ffffff;
            --card-bg-dark: #2d333b;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html, body { height: 100%; }
        body { font-family: 'Tajawal', sans-serif; background: var(--bg-light); color: var(--text-dark); transition: background-color 0.3s, color 0.3s; display: flex; flex-direction: column; }
        body.dark { background: var(--bg-dark); color: var(--text-light); }
        header { background: transparent; padding: 20px 30px; display: flex; justify-content: space-between; align-items: center; position: fixed; width: 100%; top: 0; z-index: 1000; transition: background-color 0.3s; }
        header.scrolled { background-color: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        body.dark header.scrolled { background-color: rgba(28, 43, 54, 0.9); }
        header h1 { 
            font-size: 2rem; 
            background: linear-gradient(to right, var(--primary), var(--secondary)); 
            -webkit-background-clip: text; 
            background-clip: text; 
            -webkit-text-fill-color: transparent; 
            font-weight: 700;
            text-shadow: 1px 1px 0 #000, 2px 2px 0 #000, 3px 3px 0 #000;
        }
        .nav-buttons { display: flex; gap: 10px; }
        .nav-buttons button { background: none; border: none; font-size: 1.4rem; cursor: pointer; color: inherit; transition: color 0.3s; }
        .nav-buttons button:hover { color: var(--primary); }
        *:focus-visible { outline: 2px solid var(--primary); outline-offset: 3px; }
        main { flex: 1; display: flex; flex-direction: column; }
        .hero { min-height: 100vh; position: relative; overflow: hidden; }
        .hero::before { 
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(0, 0, 0, .6), rgba(0, 0, 0, .85));
            z-index: 1;
        }
        #video-background {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transform: translate(-50%, -50%);
            z-index: 0;
        }
        .hero-content {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: #fff;
            padding: 0 20px;
            gap: 20px;
            height: 100vh;
        }
        .hero img { width: 200px; height: 200px; object-fit: cover; border-radius: 50%; border: 4px solid var(--primary); }
        .hero h2 { 
            font-size: 2.7rem; margin: 0; 
            text-shadow: 2px 2px 0 #1b1b1b, 4px 4px 0 #1b1b1b, 6px 6px 0 #1b1b1b;
        }
        .hero p { font-size: 1.3rem; max-width: 650px; margin: 0; }
        .cta-buttons { margin-top: 15px; display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; }
        .cta-buttons a { padding: 15px 30px; border-radius: 50px; text-decoration: none; font-weight: 700; font-size: 1.1rem; transition: all 0.3s; display: inline-flex; align-items: center; gap: 10px; }
        .cta-free { background: var(--primary); color: #fff; box-shadow: 0 6px 15px rgba(52, 152, 219, .5); }
        .cta-free:hover { background: var(--secondary); box-shadow: 0 8px 20px rgba(52, 152, 219, .7); transform: translateY(-2px); }
        .cta-paid { border: 2px solid #fff; color: #fff; background: transparent; }
        .cta-paid:hover { background: #fff; color: var(--secondary); transform: translateY(-2px); }
        .ad-container { margin: 40px 0; display: flex; justify-content: center; }
        .tv-section { background: #000; padding: 40px 20px; display: flex; align-items: center; justify-content: center; min-height: 70vh; }
        .tv-modern { position: relative; width: 95vw; max-width: 900px; background: #111; border-radius: 25px; padding: 10px; box-shadow: 0 0 0 2px #222, 0 0 20px rgba(52, 152, 219, .6), 0 0 40px rgba(52, 152, 219, .2); }
        .tv-screen { position: relative; width: 100%; aspect-ratio: 16/9; border-radius: 15px; overflow: hidden; background: #000; box-shadow: inset 0 0 5px #fff2; }
        .tv-stand { width: 25%; height: 40px; margin: 10px auto 0; background: linear-gradient(145deg, #333, #111); border-radius: 10px; }
        .tv-slider { position: absolute; top: 0; left: 0; width: 700%; height: 100%; display: flex; list-style: none; padding: 0; margin: 0; animation: slideShow 28s infinite; }
        .tv-slider li { width: calc(100% / 7); height: 100%; flex-shrink: 0; display: flex; align-items: center; justify-content: center; }
        .tv-slider img { max-width: 80%; max-height: 80%; object-fit: contain; }
        .ai-tools-section { padding: 60px 20px; text-align: center; background: var(--bg-light); transition: background-color 0.3s; }
        body.dark .ai-tools-section { background: var(--bg-dark); }
        .ai-tools-container { display: grid; gap: 30px; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); max-width: 1200px; margin: 40px auto 0; }
        .ai-tool-card { background: var(--card-bg-light); padding: 30px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0, 0, 0, .1); transition: transform 0.3s, box-shadow 0.3s, background-color 0.3s; text-align: right; }
        body.dark .ai-tool-card { background: var(--card-bg-dark); box-shadow: 0 10px 25px rgba(0, 0, 0, .4); }
        .ai-tool-card:hover { transform: translateY(-5px); box-shadow: 0 15px 35px rgba(0, 0, 0, .15); }
        body.dark .ai-tool-card:hover { box-shadow: 0 15px 35px rgba(0, 0, 0, .6); }
        .ai-tool-card h3 { color: var(--primary); margin-top: 0; }
        .ai-tool-card input, .ai-tool-card textarea { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; margin-top: 10px; background: #f9f9f9; color: #333; transition: border-color 0.3s, background-color 0.3s; }
        body.dark .ai-tool-card input, body.dark .ai-tool-card textarea { background: #333; border-color: #444; color: var(--text-light); }
        .ai-tool-card textarea { resize: vertical; min-height: 120px; }
        .ai-tool-card button { width: 100%; padding: 12px; margin-top: 15px; border: none; border-radius: 8px; background: var(--primary); color: #fff; font-weight: 700; cursor: pointer; transition: background-color 0.3s; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .ai-tool-card button:hover { background: var(--secondary); }
        .ai-tool-card button:disabled { opacity: .6; cursor: not-allowed; }
        .loading-spinner { border: 3px solid rgba(255, 255, 255, .3); border-radius: 50%; border-top: 3px solid #fff; width: 18px; height: 18px; animation: spin 1s linear infinite; display: none; }
        .ai-tool-card button.loading .loading-spinner { display: inline-block; }
        .result-image { max-width: 100%; border-radius: 15px; margin-top: 20px; border: 3px solid var(--primary); }
        .modal, .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; }
        .modal-overlay { background: rgba(0, 0, 0, .5); z-index: 1999; }
        .modal { background: var(--card-bg-dark); color: var(--text-light); padding: 20px 30px; border-radius: 15px; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 2000; text-align: center; border: 1px solid var(--primary); width: 90%; max-width: 400px; }
        .modal.show, .modal-overlay.show { opacity: 1; visibility: visible; }
        footer { padding: 30px 20px; text-align: center; background: rgba(0, 0, 0, .05); margin-top: auto; }
        body.dark footer { background: rgba(0, 0, 0, .2); }
        .social a { margin: 0 12px; color: inherit; font-size: 1.7rem; transition: color 0.3s; }
        .social a:hover { color: var(--primary); }
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes slideShow {
            0%, 12.5% { transform: translateX(0%); }
            14.5%, 27% { transform: translateX(-14.2857%); }
            29%, 41.5% { transform: translateX(-28.5714%); }
            43.5%, 56% { transform: translateX(-42.8571%); }
            58%, 70.5% { transform: translateX(-57.1428%); }
            72.5%, 85% { transform: translateX(-71.4285%); }
            87%, 100% { transform: translateX(-85.7142%); }
            100% { transform: translateX(0%); }
            0% { transform: translateX(43.5%); }
        }
        @media(max-width: 600px) {
            header h1 { font-size: 1.5rem; }
            .hero h2 { font-size: 2rem; }
            .hero p { font-size: 1.1rem; }
            .cta-buttons { flex-direction: column; align-items: center; }
            .tv-stand { width: 40%; height: 35px; }
        }
    </style>
</head>

<body>
<header id="header">
    <h1>N'dex</h1>
    <div class="nav-buttons">
        <button id="darkToggle" title="ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÖÿ∏ŸÑŸÖ" aria-label="ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÖÿ∏ŸÑŸÖ"><i class="fas fa-moon"></i></button>
        <button id="langToggle" title="ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑŸÑÿ∫ÿ©" aria-label="ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑŸÑÿ∫ÿ©"><i class="fas fa-globe"></i></button>
    </div>
</header>

<main>
    <section class="hero">
        <video playsinline autoplay muted loop id="video-background">
            <source src="https://g.top4top.io/m_35354qn811.mp4" type="video/mp4">
        </video>
        <div class="hero-content">
            <img src="https://i.top4top.io/p_353394ow21.png" alt="ÿ¥ÿπÿßÿ± N'dex" width="200" height="200">
            <h2 id="heroTitle"></h2>
            <p id="heroDesc"></p>
            <div class="cta-buttons">
                <a href="free-card.html" id="btnFree" class="cta-free"></a>
                <a href="sell-card.html" id="btnPaid" class="cta-paid"></a>
            </div>
        </div>
    </section>

    <section class="ad-container">
        <div style="width:100%;max-width:1200px">
            <ins class="adsbygoogle" style="display:block;width:100%;height:90px" data-ad-client="ca-pub-4947844049239094" data-ad-slot="4315885964" data-ad-format="auto" data-full-width-responsive="true"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
        </div>
    </section>

    <section class="tv-section">
        <div class="tv-modern">
            <div class="tv-screen">
                <ul class="tv-slider">
                    <li><img src="https://h.top4top.io/p_3535v6iqs1.png" alt="N'dex" loading="lazy"></li>
                    <li><img src="https://i.top4top.io/p_3535245aa2.png" alt="Intel" loading="lazy"></li>
                    <li><img src="https://j.top4top.io/p_35353539q3.png" alt="Dell" loading="lazy"></li>
                    <li><img src="https://k.top4top.io/p_3535mkw2w4.png" alt="Huawei" loading="lazy"></li>
                    <li><img src="https://l.top4top.io/p_3535dbi155.png" alt="Xbox" loading="lazy"></li>
                    <li><img src="https://b.top4top.io/p_3535ga6j37.png" alt="Netflix" loading="lazy"></li>
                    <li><img src="https://c.top4top.io/p_3535llx478.png" alt="Mastercard" loading="lazy"></li>
                </ul>
            </div>
            <div class="tv-stand"></div>
        </div>
    </section>

    <section class="ai-tools-section">
        <h2 id="aiToolsTitle"></h2>
        <div class="ai-tools-container">
            <div class="ai-tool-card">
                <h3 id="bioTitle"></h3>
                <p id="bioDesc"></p>
                <input id="bio-job-title" type="text">
                <textarea id="bio-skills"></textarea>
                <textarea id="bio-result" readonly></textarea>
                <button id="generate-bio-btn" type="button"><span></span><span class="loading-spinner"></span></button>
            </div>
            <div class="ai-tool-card">
                <h3 id="imageTitle"></h3>
                <p id="imageDesc"></p>
                <input id="image-prompt" type="text">
                <img id="image-result" class="result-image" alt="ŸÜÿ™Ÿäÿ¨ÿ© ÿßŸÑÿµŸàÿ±ÿ©" style="display:none">
                <button id="generate-image-btn" type="button"><span></span><span class="loading-spinner"></span></button>
            </div>
        </div>
    </section>
</main>

<footer>
    <p>&copy; 2025 N'dex - ŸÉŸÑ ÿßŸÑÿ≠ŸÇŸàŸÇ ŸÖÿ≠ŸÅŸàÿ∏ÿ©.</p>
    <div class="social">
        <a href="https://t.me/ndexcardbot" target="_blank" rel="noopener noreferrer" aria-label="Telegram"><i class="fab fa-telegram"></i></a>
        <a href="https://instagram.com/zako_zaki510" target="_blank" rel="noopener noreferrer" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
        <a href="mailto:beldjouharzakaria@gmail.com" aria-label="Email"><i class="fas fa-envelope"></i></a>
    </div>
</footer>

<div class="modal-overlay" id="modal-overlay"></div>
<div class="modal" id="modal">
    <p id="modal-message"></p>
    <button id="modal-close" type="button">ÿ•ÿ∫ŸÑÿßŸÇ</button>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        /* ========= CONFIG - ÿ™ÿ≠ÿ∞Ÿäÿ± ÿ£ŸÖŸÜŸä! ========= */
        // ŸÑÿß ÿ™ÿ∂ÿπ ŸÖŸÅÿßÿ™Ÿäÿ≠ API ŸáŸÜÿß ŸÅŸä ÿßŸÑŸÉŸàÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿä.
        // Ÿäÿ¨ÿ® ÿ£ŸÜ ÿ™ŸÉŸàŸÜ Ÿáÿ∞Ÿá ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠ ŸÅŸä ÿ®Ÿäÿ¶ÿ© ÿßŸÑÿÆÿßÿØŸÖ (Backend) ŸÑÿ≠ŸÖÿßŸäÿ© ÿ≠ÿ≥ÿßÿ®ŸÉ.
        const CONFIG = {
            COHERE_API_KEY: 'q8HDJmnRfzY7Bl1n8zFACSErQWwM4C7xKY4NKOt8'
        };

        /* ========= DOM ELEMENTS ========= */
        const dom = {
            header: document.getElementById('header'),
            darkToggle: document.getElementById('darkToggle'),
            langToggle: document.getElementById('langToggle'),
            body: document.body,
            modal: document.getElementById('modal'),
            modalOverlay: document.getElementById('modal-overlay'),
            modalMessage: document.getElementById('modal-message'),
            modalClose: document.getElementById('modal-close'),
            bioJobTitle: document.getElementById('bio-job-title'),
            bioSkills: document.getElementById('bio-skills'),
            bioResult: document.getElementById('bio-result'),
            generateBioBtn: document.getElementById('generate-bio-btn'),
            imagePrompt: document.getElementById('image-prompt'),
            imageResult: document.getElementById('image-result'),
            generateImageBtn: document.getElementById('generate-image-btn')
        };
        
        /* ========= TEXTS & TRANSLATIONS ========= */
        const texts = {
            ar: {
                heroTitle: "ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ ŸÅŸä N'dex",
                heroDesc: "ŸÖŸÜÿµÿ© ÿ±ŸÇŸÖŸäÿ© ŸÅÿßÿÆÿ±ÿ© ŸÑÿµŸÜÿßÿπÿ© ÿ®ÿ∑ÿßŸÇÿ© ÿßŸÑÿ™ÿπÿ±ŸäŸÅ ÿßŸÑÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿ© ÿ®ÿÆÿ∑Ÿàÿßÿ™ ÿ≥ŸáŸÑÿ© Ÿàÿ≥ÿ±Ÿäÿπÿ© Ÿàÿ®ŸÖÿ∏Ÿáÿ± ÿπÿßŸÑŸÖŸä Ÿäÿ¨ÿπŸÑŸÉ ŸÖŸÖŸäÿ≤Ÿãÿß.",
                btnFree: "ÿßŸÑŸÉÿßÿ±ÿ™ ÿßŸÑŸÖÿ¨ÿßŸÜŸä üéÅ",
                btnPaid: "ÿßŸÑŸÉÿßÿ±ÿ™ ÿßŸÑŸÖÿØŸÅŸàÿπ ‚úî",
                modalLangMessage: "ÿ™ŸÖ ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÑÿ∫ÿ© ÿ•ŸÑŸâ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©",
                aiToolsTitle: "ÿ£ÿØŸàÿßÿ™ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä",
                bioTitle: "ŸÖŸàŸÑŸëÿØ ÿßŸÑÿ≥Ÿäÿ±ÿ© ÿßŸÑÿ∞ÿßÿ™Ÿäÿ© ‚ú®",
                bioDesc: "ÿ£ÿØÿÆŸÑ ÿßŸÑŸÖÿ≥ŸÖŸâ ÿßŸÑŸàÿ∏ŸäŸÅŸä Ÿàÿ®ÿπÿ∂ ÿßŸÑŸÖŸáÿßÿ±ÿßÿ™ ŸÑŸäŸÇŸàŸÖ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ÿ®ŸÉÿ™ÿßÿ®ÿ© ÿ≥Ÿäÿ±ÿ© ÿ∞ÿßÿ™Ÿäÿ© ÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿ© ŸÑŸÉ.",
                bioInputPlaceholder: "ÿßŸÑŸÖÿ≥ŸÖŸâ ÿßŸÑŸàÿ∏ŸäŸÅŸä (ŸÖÿ´ÿßŸÑ: ŸÖÿ∑Ÿàÿ± ŸàŸäÿ®)",
                skillsInputPlaceholder: "ÿ£ÿØÿÆŸÑ ÿßŸÑŸÖŸáÿßÿ±ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© (ŸÖÿ´ÿßŸÑ: JavaScript, React, CSS)",
                bioResultPlaceholder: "ÿ≥ÿ™ÿ∏Ÿáÿ± ÿßŸÑÿ≥Ÿäÿ±ÿ© ÿßŸÑÿ∞ÿßÿ™Ÿäÿ© ŸáŸÜÿß...",
                generateBioBtn: "ÿ™ŸàŸÑŸäÿØ ÿßŸÑÿ≥Ÿäÿ±ÿ© ÿßŸÑÿ∞ÿßÿ™Ÿäÿ©",
                imageTitle: "ÿ™ŸàŸÑŸäÿØ ÿµŸàÿ±ÿ©",
                imageDesc: "ÿßŸÉÿ™ÿ® ŸàÿµŸÅŸãÿß ÿØŸÇŸäŸÇŸãÿß ŸÑŸÑÿµŸàÿ±ÿ© ÿßŸÑÿ™Ÿä ÿ™ÿ±ŸäÿØŸáÿß ŸÑŸäŸÇŸàŸÖ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ÿ®ÿ•ŸÜÿ¥ÿßÿ¶Ÿáÿß.",
                imagePromptPlaceholder: "ŸàÿµŸÅ ÿßŸÑÿµŸàÿ±ÿ© (ŸÖÿ´ÿßŸÑ: ÿµŸàÿ±ÿ© ÿ¥ÿÆÿµŸäÿ© ÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿ© ŸÑÿ¥ÿßÿ® ŸÅŸä ŸÖŸÉÿ™ÿ®)",
                generateImageBtn: "ÿ™ŸàŸÑŸäÿØ ÿßŸÑÿµŸàÿ±ÿ©",
                generatingText: "ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ŸàŸÑŸäÿØ...",
                bioError: "ŸÑŸÖ Ÿäÿ™ŸÖŸÉŸÜ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ŸÖŸÜ ÿ™ŸàŸÑŸäÿØ ÿ≥Ÿäÿ±ÿ© ÿ∞ÿßÿ™Ÿäÿ©. ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.",
                generalError: "ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ™ŸàŸÑŸäÿØ. ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßÿ™ÿµÿßŸÑŸÉ ÿ®ÿßŸÑÿ•ŸÜÿ™ÿ±ŸÜÿ™ ŸàÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÑÿßÿ≠ŸÇÿßŸã.",
                imageError: "ŸÅÿ¥ŸÑ ÿ™ŸàŸÑŸäÿØ ÿßŸÑÿµŸàÿ±ÿ©. ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.",
                fillAllFields: "ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÑ",
                noInternet: "ŸÑÿß ŸäŸàÿ¨ÿØ ÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿ•ŸÜÿ™ÿ±ŸÜÿ™",
                darkToggleAria: "ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÖÿ∏ŸÑŸÖ",
                langToggleAria: "ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑŸÑÿ∫ÿ©"
            },
            en: {
                heroTitle: "Welcome to N'dex",
                heroDesc: "A premium digital platform to create your professional business card quickly and easily with a global look that makes you stand out.",
                btnFree: "Start Free Card üéÅ",
                btnPaid: "Try Paid Card ‚úî",
                modalLangMessage: "Language changed to English",
                modalClose: "Close",
                aiToolsTitle: "AI Tools",
                bioTitle: "AI Bio Generator ‚ú®",
                bioDesc: "Enter your job title and some skills, and AI will write a professional bio for you.",
                bioInputPlaceholder: "Job Title (e.g., Web Developer)",
                skillsInputPlaceholder: "Enter key skills (e.g., JavaScript, React, CSS)",
                bioResultPlaceholder: "The professional bio will appear here...",
                generateBioBtn: "Generate Bio",
                imageTitle: "AI Professional Image Generator ‚ú®",
                imageDesc: "Write a detailed description of the image you want AI to create.",
                imagePromptPlaceholder: "Image description (e.g., professional headshot of a young man in an office)",
                generateImageBtn: "Generate Image",
                generatingText: "Generating...",
                bioError: "AI could not generate a bio. Please try again.",
                generalError: "An error occurred during generation. Please check your internet connection and try again later.",
                imageError: "Image generation failed. Please try again.",
                fillAllFields: "Please fill all fields",
                noInternet: "No internet connection",
                darkToggleAria: "Toggle dark mode",
                langToggleAria: "Toggle language"
            }
        };

        /* ========= UTILS ========= */
        const showModal = (msg) => {
            dom.modalMessage.textContent = msg;
            dom.modal.classList.add('show');
            dom.modalOverlay.classList.add('show');
        };
        const closeModal = () => {
            dom.modal.classList.remove('show');
            dom.modalOverlay.classList.remove('show');
        };
        dom.modalClose.addEventListener('click', closeModal);
        dom.modalOverlay.addEventListener('click', closeModal);
        window.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && dom.modal.classList.contains('show')) {
                closeModal();
            }
        });

        /* ========= HEADER SCROLL EFFECT ========= */
        window.addEventListener('scroll', () => {
            dom.header.classList.toggle('scrolled', window.scrollY > 50);
        });

        /* ========= THEME ========= */
        let currentTheme = localStorage.getItem('theme') || 'light';
        if (currentTheme === 'dark') dom.body.classList.add('dark');
        dom.darkToggle.addEventListener('click', () => {
            dom.body.classList.toggle('dark');
            currentTheme = dom.body.classList.contains('dark') ? 'dark' : 'light';
            localStorage.setItem('theme', currentTheme);
        });

        /* ========= LANGUAGE ========= */
        let currentLang = localStorage.getItem('lang') || 'ar';
        const updateLanguage = (lang, showModalMsg = true) => {
            document.documentElement.lang = lang;
            document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
            currentLang = lang;
            localStorage.setItem('lang', lang);

            const t = texts[lang];
            document.getElementById('heroTitle').textContent = t.heroTitle;
            document.getElementById('heroDesc').textContent = t.heroDesc;
            document.getElementById('btnFree').textContent = t.btnFree;
            document.getElementById('btnPaid').textContent = t.btnPaid;
            document.getElementById('aiToolsTitle').textContent = t.aiToolsTitle;
            document.getElementById('bioTitle').textContent = t.bioTitle;
            document.getElementById('bioDesc').textContent = t.bioDesc;
            dom.bioJobTitle.placeholder = t.bioInputPlaceholder;
            dom.bioSkills.placeholder = t.skillsInputPlaceholder;
            dom.bioResult.placeholder = t.bioResultPlaceholder;
            dom.generateBioBtn.firstElementChild.textContent = t.generateBioBtn;
            document.getElementById('imageTitle').textContent = t.imageTitle;
            document.getElementById('imageDesc').textContent = t.imageDesc;
            dom.imagePrompt.placeholder = t.imagePromptPlaceholder;
            dom.generateImageBtn.firstElementChild.textContent = t.generateImageBtn;
            dom.darkToggle.setAttribute('aria-label', t.darkToggleAria);
            dom.langToggle.setAttribute('aria-label', t.langToggleAria);
            
            if (showModalMsg) showModal(t.modalLangMessage);
        };
        dom.langToggle.addEventListener('click', () => updateLanguage(currentLang === 'ar' ? 'en' : 'ar'));
        updateLanguage(currentLang, false);

        const setButtonLoadingState = (btn, isLoading) => {
            btn.disabled = isLoading;
            btn.classList.toggle('loading', isLoading);
            const textKey = btn.id === 'generate-bio-btn' ? 'generateBioBtn' : 'generateImageBtn';
            btn.firstElementChild.textContent = isLoading ? texts[currentLang].generatingText : texts[currentLang][textKey];
        };

        // Ÿàÿ∏ŸäŸÅÿ© Cohere AI ŸÑÿ™ŸàŸÑŸäÿØ ÿßŸÑÿ≥Ÿäÿ±ÿ© ÿßŸÑÿ∞ÿßÿ™Ÿäÿ©
        dom.generateBioBtn.addEventListener('click', async () => {
            const jobTitle = dom.bioJobTitle.value.trim();
            const skills = dom.bioSkills.value.trim();
            
            if (!jobTitle || !skills) {
                return showModal(texts[currentLang].fillAllFields);
            }
            if (!navigator.onLine) {
                return showModal(texts[currentLang].noInternet);
            }

            setButtonLoadingState(dom.generateBioBtn, true);

            const prompt = `ÿ®ÿµŸÅÿ™ŸÉ ŸÉÿßÿ™ÿ® ÿ≥Ÿäÿ±ÿ© ÿ∞ÿßÿ™Ÿäÿ© ÿÆÿ®Ÿäÿ±ÿå ÿßŸÉÿ™ÿ® ÿ≥Ÿäÿ±ÿ© ÿ∞ÿßÿ™Ÿäÿ© ÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿ© ŸàŸÖŸÇŸÜÿπÿ© (Professional Bio) ŸÑÿ¥ÿÆÿµ ŸäÿπŸÖŸÑ ÿ®ŸÖŸáŸÜÿ© "${jobTitle}" ŸàŸÑÿØŸäŸá ÿßŸÑŸÖŸáÿßÿ±ÿßÿ™ ÿßŸÑÿ™ÿßŸÑŸäÿ©: "${skills}". ÿßÿ¨ÿπŸÑ ÿßŸÑÿ≥Ÿäÿ±ÿ© ŸÖŸàÿ¨ÿ≤ÿ© (ÿ®ÿ≠ÿØ ÿ£ŸÇÿµŸâ 150 ŸÉŸÑŸÖÿ©) Ÿàÿ±ŸÉÿ≤ ÿπŸÑŸâ ÿßŸÑÿ•ŸÜÿ¨ÿßÿ≤ÿßÿ™ ÿßŸÑŸÇŸàŸäÿ© ÿ®ÿØŸÑÿßŸã ŸÖŸÜ ŸÖÿ¨ÿ±ÿØ ÿ≥ÿ±ÿØ ÿßŸÑŸÖŸáÿßŸÖ.`;

            try {
                const response = await fetch('https://api.cohere.ai/v1/generate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${CONFIG.COHERE_API_KEY}`
                    },
                    body: JSON.stringify({
                        prompt: prompt,
                        model: 'command', 
                        max_tokens: 300
                    }),
                });
                
                if (!response.ok) {
                    const errorJson = await response.json();
                    throw new Error(`ÿÆÿ∑ÿ£ ŸÅŸä API: ${response.status} - ${JSON.stringify(errorJson)}`);
                }
                
                const result = await response.json();
                
                if (result.generations && result.generations[0] && result.generations[0].text) {
                    const bioText = result.generations[0].text.trim();
                    dom.bioResult.value = bioText;
                } else {
                    throw new Error('ÿ®ŸÜŸäÿ© ÿßŸÑÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ŸÖŸÜ API ÿ∫Ÿäÿ± ÿµÿßŸÑÿ≠ÿ©.');
                }
            } catch (error) {
                console.error('ÿÆÿ∑ÿ£ ŸÅŸä API ÿßŸÑÿÆÿßÿµ ÿ®ŸÄ Cohere:', error);
                showModal(`${texts[currentLang].generalError} (${error.message})`);
            } finally {
                setButtonLoadingState(dom.generateBioBtn, false);
            }
        });
        
        // Ÿàÿ∏ŸäŸÅÿ© Gemini API ŸÑÿ™ŸàŸÑŸäÿØ ÿßŸÑÿµŸàÿ±
        dom.generateImageBtn.addEventListener('click', async () => {
            const prompt = dom.imagePrompt.value.trim();
            if (!prompt) return showModal(texts[currentLang].fillAllFields);
            if (!navigator.onLine) return showModal(texts[currentLang].noInternet);

            setButtonLoadingState(dom.generateImageBtn, true);
            dom.imageResult.style.display = 'none';

            try {
                const apiKey = ""; 
                const payload = { 
                    instances: [{ prompt: `${prompt}, professional portrait, studio lighting` }], 
                    parameters: { "sampleCount": 1 } 
                };
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/imagen-3.0-generate-002:predict?key=${apiKey}`;
                
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                if (!response.ok) {
                    const errorJson = await response.json();
                    throw new Error(`HTTP error! status: ${response.status} - ${JSON.stringify(errorJson)}`);
                }
                const result = await response.json();
                
                const base64Data = result?.predictions?.[0]?.bytesBase64Encoded;
                if (base64Data) {
                    dom.imageResult.src = `data:image/png;base64,${base64Data}`;
                    dom.imageResult.style.display = 'block';
                } else {
                    dom.imageResult.src = '';
                    dom.imageResult.style.display = 'none';
                    showModal(texts[currentLang].imageError);
                }
            } catch (error) {
                console.error('Error generating image:', error);
                dom.imageResult.src = '';
                dom.imageResult.style.display = 'none';
                showModal(`${texts[currentLang].generalError} (${error.message})`);
            } finally {
                setButtonLoadingState(dom.generateImageBtn, false);
            }
        });

        // ÿßÿ¨ÿπŸÑ ÿ≥ÿ±ÿπÿ© ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÅŸäÿØŸäŸà 2x
        const video = document.getElementById('video-background');
        if (video) {
            video.playbackRate = 2.0;
        }
    });
</script>
</body>
</html>