<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>عرض نموذج 3D</title>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{display:flex;height:100vh;background:#000;overflow:hidden;font-family:Arial,sans-serif}
        #menuToggle{position:fixed;top:20px;left:20px;z-index:1000;background:rgba(255,255,255,.1);border:none;border-radius:50%;width:50px;height:50px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.3s}
        #menuToggle:hover{background:rgba(255,255,255,.2)}
        #menuToggle span{display:block;width:25px;height:3px;background:#fff;margin:5px 0;transition:.3s}
        #sidebar{position:fixed;left:-300px;top:0;width:300px;height:100vh;background:#1a1a1a;border-right:1px solid #333;transition:left .3s;z-index:999;overflow-y:auto}
        #sidebar.open{left:0}
        #sidebar::-webkit-scrollbar{width:8px}
        #sidebar::-webkit-scrollbar-track{background:#2a2a2a}
        #sidebar::-webkit-scrollbar-thumb{background:#555;border-radius:4px}
        .thumbnail-container{padding:10px}
        .thumbnail{width:100%;height:150px;object-fit:cover;cursor:pointer;border:2px solid transparent;border-radius:8px;transition:.3s;margin-bottom:15px}
        .thumbnail:hover{border-color:#fff;opacity:.8;transform:scale(1.02)}
        .thumbnail.active{border-color:#4CAF50;box-shadow:0 0 10px rgba(76,175,80,.5)}
        .thumbnail-label{color:#fff;text-align:center;margin-top:5px;font-size:14px}
        #main-content{flex:1;display:flex;justify-content:center;align-items:center;position:relative;margin-left:0;transition:margin-left .3s}
        model-viewer{width:100%;height:100%;max-width:800px;max-height:600px}
        #watermark{position:fixed;top:10px;right:10px;color:rgba(255,255,255,.2);font-size:20px;pointer-events:none;z-index:9999}
        #loading{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;display:none;z-index:100}
        #loading img{width:100px;height:100px}
        #loading p{color:#fff;margin-top:10px;font-size:16px}
        .model-name{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);color:#fff;background:rgba(0,0,0,.7);padding:10px 20px;border-radius:20px;opacity:0;transition:opacity .3s;pointer-events:none}
        .model-name.show{opacity:1}
    </style>
</head>
<body>
<button id="menuToggle"><div><span></span><span></span><span></span></div></button>
<div id="sidebar">
    <div class="thumbnail-container" id="thumbnailsContainer"></div>
</div>
<div id="main-content">
    <div id="watermark">© جميع الحقوق محفوظة</div>
    <div id="loading"><img src="https://i.gifer.com/ZZ5H.gif" alt="جاري التحميل"><p>جاري تحميل النموذج...</p></div>
    <model-viewer id="modelViewer" src="models/model1.glb" alt="نموذج 3D" auto-rotate camera-controls ar></model-viewer>
    <div class="model-name" id="modelName">النموذج 1</div>
</div>

<script>
    const models=[];
    for(let i=1;i<=70;i++){
      models.push({name:`النموذج ${i}`,model:`models/model${i}.glb`,thumbnail:`thumbnails/thumb${i}.jpg`})
    }
    const menuToggle=document.getElementById('menuToggle');
    const sidebar=document.getElementById('sidebar');
    const thumbnailsContainer=document.getElementById('thumbnailsContainer');
    const modelViewer=document.getElementById('modelViewer');
    const modelName=document.getElementById('modelName');
    const loading=document.getElementById('loading');

    menuToggle.addEventListener('click',()=>sidebar.classList.toggle('open'));
    document.addEventListener('click',e=>{
      if(!sidebar.contains(e.target)&&!menuToggle.contains(e.target))sidebar.classList.remove('open');
    });

    models.forEach((model,index)=>{
      const container=document.createElement('div');
      container.style.marginBottom='20px';
      const img=document.createElement('img');
      img.src=model.thumbnail;
      img.alt=model.name;
      img.className='thumbnail';
      img.dataset.index=index;
      const label=document.createElement('div');
      label.className='thumbnail-label';
      label.textContent=model.name;
      img.addEventListener('click',()=>{
        loadModel(index);
        sidebar.classList.remove('open');
      });
      container.appendChild(img);
      container.appendChild(label);
      thumbnailsContainer.appendChild(container);
    });

    let nameTimeout;
    function loadModel(index){
      const model=models[index];
      document.querySelectorAll('.thumbnail').forEach(thumb=>thumb.classList.remove('active'));
      document.querySelector(`[data-index="${index}"]`).classList.add('active');
      loading.style.display='block';
      modelViewer.src=model.model;
      modelName.textContent=model.name;
      modelViewer.addEventListener('load',()=>{
        loading.style.display='none';
        modelName.classList.add('show');
        clearTimeout(nameTimeout);
        nameTimeout=setTimeout(()=>modelName.classList.remove('show'),1000);
      },{once:true});
    }
    loadModel(0);

    document.addEventListener('contextmenu',e=>e.preventDefault());
    document.addEventListener('keydown',function(e){
      if(e.key==="PrintScreen"||(e.ctrlKey&&e.key==="p")||(e.ctrlKey&&e.shiftKey&&e.key==="s")||(e.metaKey&&e.shiftKey&&e.key==="4")||e.key==="F12"){
        e.preventDefault();
        alert("التقاط الشاشة غير مسموح.");
      }
    });
    document.addEventListener('dragstart',e=>e.preventDefault());
    setInterval(()=>{
      const w=window.outerWidth-window.innerWidth>160;
      const h=window.outerHeight-window.innerHeight>160;
      if(w||h){document.body.style.display="none";alert("تم اكتشاف أدوات المطورين. تم إخفاء النموذج.");}
    },1000);
</script>
</body>
</html>